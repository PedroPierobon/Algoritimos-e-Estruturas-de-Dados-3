# Compilador e flags
CC = gcc
CFLAGS = -Wall -Wextra -Werror -pedantic -std=c99 -O3 -g

# Arquivos-fonte e alvo
SRCS = redBlack.c myrb.c
OBJS = $(SRCS:.c=.o)
	TARGET = myrb

# Regra padr√£o
all: $(TARGET)

# Como compilar o execut√°vel
$(TARGET): $(OBJS)
	$(CC) $(CFLAGS) -o $@ $^

# Regra para .o a partir de .c
%.o: %.c redBlack.h
	$(CC) $(CFLAGS) -c $< -o $@

# Limpa arquivos gerados
clear:
	rm -f $(OBJS) $(TARGET) Testers/*.temp

# Rodar todos os testes
test: $(TARGET)
	@echo "üîç Rodando testes..."
	@for i in 1 2 3 4; do \
		echo "Testando caso $$i..."; \
		./$(TARGET) < Testers/test$$i.in > Testers/test$$i.temp; \
		if diff -q Testers/teste$$i.out Testers/test$$i.temp > /dev/null; then \
		echo "‚úÖ Teste $$i: OK"; \
		else \
		echo "‚ùå Teste $$i: FALHOU"; \
		echo "  Diferen√ßas:"; \
		diff -y --suppress-common-lines Testers/teste$$i.out Testers/test$$i.temp || true; \
		fi; \
		done
